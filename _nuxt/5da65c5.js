(window.webpackJsonp=window.webpackJsonp||[]).push([[12,22],{332:function(t,e,n){"use strict";n.r(e);var r=n(341),o=n.n(r),c={props:["id","options","styles"],name:"highcharts",data:function(){return{chart:null}},mounted:function(){this.initChart()},watch:{options:function(){this.chart&&this.chart.update(this.options)}},methods:{initChart:function(){this.$el.style.height=(this.styles.height||400)+"px",this.chart=new o.a.Chart(this.$el,this.options)}}},l=(n(335),n(17)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"highcharts-container",attrs:{id:t.id}})}),[],!1,null,null,null);e.default=component.exports},333:function(t,e,n){var content=n(336);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(47).default)("16b76a31",content,!0,{sourceMap:!1})},334:function(t,e,n){"use strict";var r=n(4),o=n(87).find,c=n(146),l="find",h=!0;l in[]&&Array(1).find((function(){h=!1})),r({target:"Array",proto:!0,forced:h},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),c(l)},335:function(t,e,n){"use strict";n(333)},336:function(t,e,n){var r=n(46)(!1);r.push([t.i,".highcharts-container{width:100%;height:500px}",""]),t.exports=r},409:function(t,e,n){var content=n(438);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(47).default)("11294d11",content,!0,{sourceMap:!1})},437:function(t,e,n){"use strict";n(409)},438:function(t,e,n){var r=n(46)(!1);r.push([t.i,".charts{display:flex;width:100%}.charts .chart-item{padding:10px;flex:1}",""]),t.exports=r},447:function(t,e,n){"use strict";n.r(e);n(334),n(37),n(48);var r=n(6),o=n(332),c=n(337),l=n.n(c),h={components:{TranChart:o.default},data:function(){return{loading:!0,brands:[],categoryes:[],list:[],chartlist:[],countCharts:[],avgCharts:[]}},methods:{load:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,l.a.get("/report/server/getChartList");case 4:n=e.sent,t.categoryes=n.data.model[0]||[],t.brands=n.data.model[1]||[],t.list=n.data.model[2]||[],t.autoCalc(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),t.$message({type:"error",message:"网络出错，请稍后再试"});case 15:t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},autoCalc:function(){for(var t=this,e=[],n=this.categoryes.map((function(a){return a.QT_Category2})),r=this.brands.map((function(a){return a.Brand})),o=function(o){for(var c=n[o],l=t.categoryes[o],h=[],d=[],f=[],v=function(e){var n=r[e],o=t.list.find((function(a){return a.Brand==n&&a.QT_Category2==c}));h.push(o?o.amount:0),d.push(o?o.cnt:0),f.push(o?o.avgprice:0)},m=0;m<r.length;m++)v(m);e.push({chart:{type:"line"},xAxis:{categories:r},yAxis:{title:"销售额"},plotOptions:{bar:{dataLabels:{formatter:function(){return Math.round(this.y/l.amount*100)+"%"},enabled:!0,allowOverlap:!0}}},title:{text:c},credits:{enabled:!1},legend:{enabled:!1},series:[{name:c,data:h}]})},c=0;c<n.length;c++)o(c);this.chartlist=e}},created:function(){this.load()}},d=(n(437),n(17)),component=Object(d.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel-title"},[t._v("\n      销售金额\n    ")]),t._v(" "),n("div",{staticClass:"panel-content"},[n("div",{staticClass:"chartitem"},[n("el-card",[n("div",{staticClass:"charts"},t._l(t.chartlist,(function(t,e){return n("div",{key:e,staticClass:"chart-item"},[n("TranChart",{attrs:{id:"chartlist_"+e,options:t,styles:{height:300}}})],1)})),0)])],1)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{TranChart:n(332).default})}}]);