(window.webpackJsonp=window.webpackJsonp||[]).push([[28,5,14,15,16,17,22,23],{332:function(t,e,r){"use strict";r.r(e);var n=r(341),o=r.n(n),l={props:["id","options","styles"],name:"highcharts",data:function(){return{chart:null}},mounted:function(){this.initChart()},watch:{options:function(){this.chart&&this.chart.update(this.options)}},methods:{initChart:function(){this.$el.style.height=(this.styles.height||400)+"px",this.chart=new o.a.Chart(this.$el,this.options)}}},c=(r(335),r(17)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"highcharts-container",attrs:{id:t.id}})}),[],!1,null,null,null);e.default=component.exports},333:function(t,e,r){var content=r(336);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(47).default)("16b76a31",content,!0,{sourceMap:!1})},334:function(t,e,r){"use strict";var n=r(4),o=r(87).find,l=r(146),c="find",d=!0;c in[]&&Array(1).find((function(){d=!1})),n({target:"Array",proto:!0,forced:d},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),l(c)},335:function(t,e,r){"use strict";r(333)},336:function(t,e,r){var n=r(46)(!1);n.push([t.i,".highcharts-container{width:100%;height:500px}",""]),t.exports=n},347:function(t,e,r){"use strict";r.r(e);var n=r(353),o=r.n(n),l=r(366),c=r.n(l),d={name:"Treemap",data:function(){return{chart:null}},mounted:function(){this.initChart()},watch:{options:function(){this.chart&&this.chart.update(this.options)}},methods:{initChart:function(){c()(o.a);this.chart=new o.a.Chart(this.$el,{series:[{type:"treemap",layoutAlgorithm:"stripes",alternateStartingDirection:!0,levels:[{level:1,layoutAlgorithm:"sliceAndDice",dataLabels:{enabled:!0,align:"right",verticalAlign:"bottom",style:{fontSize:"18px",fontWeight:"bold"}}}],data:[{id:"Chanel",name:"25%",color:"#f21e39"},{name:"Chanel",parent:"Chanel",value:25},{id:"Dior",name:"20%",color:"#b3992a"},{name:"Dior",parent:"Dior",value:20},{id:"Gucci",name:"15%",color:"#1bbcd1"},{name:"Gucci",parent:"Gucci",value:15},{id:"Bally",name:"10%",color:"#45bc2a"},{name:"Bally",parent:"Bally",value:10},{id:"Celine",name:"8%",color:"#8af468"},{name:"Celine",parent:"Celine",value:8},{id:"Parda",name:"8%",color:"#dfb172"},{name:"Parda",parent:"Parda",value:8},{id:"Coach",name:"7%",color:"#e5b751"},{name:"Coach",parent:"Coach",value:7},{id:"Zara",name:"7%",color:"#42a5be"},{name:"Zara",parent:"Zara",value:7}],dataLabels:{enabled:!0,align:"left",verticalAlign:"top",style:{fontSize:"18px",fontWeight:"bold"},formatter:function(){var t=this.key;this.point.value;return t}}}]})}}},h=r(17),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart-warpper"})}),[],!1,null,null,null);e.default=component.exports},348:function(t,e,r){var content=r(355);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(47).default)("f714bcf0",content,!0,{sourceMap:!1})},354:function(t,e,r){"use strict";r(348)},355:function(t,e,r){var n=r(46)(!1);n.push([t.i,".large{font-size:24px;height:62px}.container{padding:0 15px}.el-table .odd-row{background:#add8e6}.el-table .even-row{background:#f5fffa}",""]),t.exports=n},358:function(t,e,r){var content=r(375);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(47).default)("b978681e",content,!0,{sourceMap:!1})},359:function(t,e,r){var content=r(377);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(47).default)("6cb66e5b",content,!0,{sourceMap:!1})},360:function(t,e,r){var content=r(379);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(47).default)("02573151",content,!0,{sourceMap:!1})},361:function(t,e,r){var content=r(381);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(47).default)("45df22c6",content,!0,{sourceMap:!1})},367:function(t,e,r){"use strict";r.r(e);r(347);var n={methods:{tableRowClassName:function(t){t.row;return t.rowIndex%2==1?"odd-row":"even-row"}},data:function(){return{items:[{brand:"Chanel",distribution:"25%",rto:"+2%"},{brand:"Dior",distribution:"20%",rto:"-5%"},{brand:"Gucci",distribution:"15%",rto:"+1%"},{brand:"Bally",distribution:"10%",rto:"+3%"},{brand:"Celine",distribution:"8%",rto:"-4%"}]}},created:function(){},asyncData:function(t){t.req}},o=(r(354),r(17)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:16}},[r("Treemap")],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"chart-warpper"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.items,"row-class-name":t.tableRowClassName}},[r("el-table-column",{attrs:{prop:"brand",label:"品牌",sortable:"","class-name":"large"}}),t._v(" "),r("el-table-column",{attrs:{prop:"distribution",label:"占比",sortable:"","class-name":"large"}}),t._v(" "),r("el-table-column",{attrs:{prop:"rto",sortable:"",label:"=/-","class-name":"large"}})],1)],1)])],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Treemap:r(347).default})},374:function(t,e,r){"use strict";r(358)},375:function(t,e,r){var n=r(46)(!1);n.push([t.i,".chart-warpper,.chart-warpper .row-2{margin-top:25px}.chart-warpper .category-tab{height:40px;line-height:40px;background-color:#f5f7fa;border:1px solid #e4e7ed}.chart-warpper .category-tab ul{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.chart-warpper .category-tab ul li{flex:1;height:100%;list-style:none;text-align:center;color:#909399;cursor:pointer;transition:all .5s linear}.chart-warpper .category-tab ul li:hover{color:#409eff}.chart-warpper .category-tab ul .active{background:#409eff;color:#fff}.chart-warpper .category-tab ul .active:hover{color:#fff}.charts{display:flex;width:100%}.charts .chart-item{padding:10px;flex:1}",""]),t.exports=n},376:function(t,e,r){"use strict";r(359)},377:function(t,e,r){var n=r(46)(!1);n.push([t.i,".chart-warpper,.chart-warpper .row-2{margin-top:25px}.chart-warpper .category-tab{height:40px;line-height:40px;background-color:#f5f7fa;border:1px solid #e4e7ed}.chart-warpper .category-tab ul{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.chart-warpper .category-tab ul li{flex:1;height:100%;list-style:none;text-align:center;color:#909399;cursor:pointer;transition:all .5s linear}.chart-warpper .category-tab ul li:hover{color:#409eff}.chart-warpper .category-tab ul .active{background:#409eff;color:#fff}.chart-warpper .category-tab ul .active:hover{color:#fff}.charts{display:flex;width:100%}.charts .chart-item{padding:10px;flex:1}",""]),t.exports=n},378:function(t,e,r){"use strict";r(360)},379:function(t,e,r){var n=r(46)(!1);n.push([t.i,".chart-warpper,.chart-warpper .row-2{margin-top:25px}.chart-warpper .category-tab{height:40px;line-height:40px;background-color:#f5f7fa;border:1px solid #e4e7ed}.chart-warpper .category-tab ul{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.chart-warpper .category-tab ul li{flex:1;height:100%;list-style:none;text-align:center;color:#909399;cursor:pointer;transition:all .5s linear}.chart-warpper .category-tab ul li:hover{color:#409eff}.chart-warpper .category-tab ul .active{background:#409eff;color:#fff}.chart-warpper .category-tab ul .active:hover{color:#fff}.charts{display:flex;width:100%}.charts .chart-item{padding:10px;flex:1}",""]),t.exports=n},380:function(t,e,r){"use strict";r(361)},381:function(t,e,r){var n=r(46)(!1);n.push([t.i,".chart-warpper,.chart-warpper .row-2{margin-top:25px}.chart-warpper .category-tab{height:40px;line-height:40px;background-color:#f5f7fa;border:1px solid #e4e7ed}.chart-warpper .category-tab ul{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.chart-warpper .category-tab ul li{flex:1;height:100%;list-style:none;text-align:center;color:#909399;cursor:pointer;transition:all .5s linear}.chart-warpper .category-tab ul li:hover{color:#409eff}.chart-warpper .category-tab ul .active{background:#409eff;color:#fff}.chart-warpper .category-tab ul .active:hover{color:#fff}.charts{display:flex;width:100%}.charts .chart-item{padding:10px;flex:1}",""]),t.exports=n},391:function(t,e,r){"use strict";r.r(e);r(334),r(37),r(48);var n=r(6),o=r(332),l=r(337),c=r.n(l),d={components:{TranChart:o.default},data:function(){return{categories:[],chartdata:[],cntchartdata:[],tran:[],cate:"",cate1:"",loading:!0,xCategories:[],sexRato:null,chartlist:[],countCharts:[],avgCharts:[]}},computed:{chartData:function(){var t=this.chartdata.map((function(a){return a.y})),e=0;return t&&t.length>0&&(e=t.reduce((function(t,e){return t+e}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"销售总额:￥"+this.$ft(e)+" "+this.$rato(.05),useHTML:!0},subtitle:{text:"*按下显示分类数值"},credits:{enabled:!1},tooltip:{pointFormat:"销售额：<b>{point.y}</b>，占比<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#333"}}}},series:[{name:"占比",colorByPoint:!0,data:this.chartdata}]}},chartDataCn:function(){var t=this.cntchartdata.map((function(a){return a.y})),e=0;return t&&t.length>0&&(e=t.reduce((function(t,e){return t+e}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"销售产品数量: "+this.$ft(e)+"件 "+this.$rato(-.03),useHTML:!0},subtitle:{text:"*按下显示分类数值"},credits:{enabled:!1},tooltip:{pointFormat:"共销售<b>{point.y}</b>件，占比<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#333"}}}},series:[{name:"分类",colorByPoint:!0,data:this.cntchartdata}]}},barAmount:function(){var t=this,e=this.tran,data=[];e.length>0&&(data=this.xCategories.map((function(r){var n=e.find((function(a){return a.QT_Category2==t.cate&&a.dweek==r}));return n?n.totalPrice:0})));var r=data;return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},title:{text:this.cate+"销售额"},xAxis:{categories:this.xCategories},yAxis:{title:{text:"销售额"}},min:0,credits:{enabled:!1},legend:{enabled:!1},tooltip:{pointFormat:"销售额：<b>{point.y}</b>"},series:[{name:this.cate,data:r}]}},barCount:function(){var t=this,e=this.tran,data=[];return e.length>0&&(data=this.xCategories.map((function(r){var n=e.find((function(a){return a.QT_Category2==t.cate1&&a.dweek==r}));return n?n.totalCount:0}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},title:{text:this.cate1+"销售数量"},xAxis:{categories:this.xCategories},yAxis:{title:{text:"销售量"}},credits:{enabled:!1},legend:{enabled:!1},tooltip:{pointFormat:"共销售<b>{point.y}</b>件"},series:[{name:"分类",data:data}]}}},methods:{load:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c.a.get("/report/server/getChartList");case 4:r=e.sent,t.categoryes=r.data.model[0]||[],t.brands=r.data.model[1]||[],t.list=r.data.model[2]||[],t.autoCalc(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),t.$message({type:"error",message:"网络出错，请稍后再试"});case 15:t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},autoCalc:function(){for(var t=this,e=[],r=this.categoryes.map((function(a){return a.QT_Category2})),n=this.brands.map((function(a){return a.Brand})),o=function(o){for(var l=r[o],c=(t.categoryes[o],[]),d=[],h=[],f=function(e){var r=n[e],o=t.list.find((function(a){return a.Brand==r&&a.QT_Category2==l}));c.push(o?o.amount:0),d.push(o?o.cnt:0),h.push(o?o.avgprice:0)},m=0;m<n.length;m++)f(m);e.push({chart:{type:"bar"},xAxis:{categories:n},yAxis:{title:"售价"},title:{text:l},credits:{enabled:!1},legend:{enabled:!1},series:[{name:l,data:h}]})},l=0;l<r.length;l++)o(l);this.avgCharts=e}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.load(),e.prev=2,e.next=5,c.a.get("/report/server/getTranData");case 5:r=e.sent,t.categories=r.data.model[0]||[],t.tran=r.data.model[1]||[],t.xCategories=(r.data.model[2]||[]).map((function(a){return a.dlist})),(n=r.data.model[3]||[])&&n.length>0&&(o=n.find((function(a){return"女士"==a.ttype})),l=n.find((function(a){return"男士"==a.ttype})),o&&l&&(d=o.cnt+l.cnt,h=o.amount+l.amount,t.sexRato={womenCnt:o.cnt/d*100,menCnt:l.cnt/d*100,womenAmount:o.amount/h*100,menAmount:l.amount/h*100})),t.categories.length>0&&(t.chartdata=t.categories.map((function(a){return{name:a.QT_Category2,y:a.totalPrice}})),t.cntchartdata=t.categories.map((function(a){return{name:a.QT_Category2,y:a.totalCount}})),t.cate=t.categories[0].QT_Category2,t.cate1=t.categories[0].QT_Category2),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t.$message({type:"error",message:"网络出错，请稍后再试"});case 17:t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})))()}},h=(r(374),r(17)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart-warpper"},[r("div",{staticClass:"panel"},[t._m(0),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,stripe:""}},[r("el-table-column",{attrs:{prop:"QT_Category2",label:"分类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"totalPrice",label:"销售总额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.$ft(e.row.totalPrice))+"\n                  ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"amountRato",label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$percent(e.row.amountRato))}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"＋／－"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$rato(e.row.arato))}})]}}])})],1),t._v(" "),t.sexRato?r("div",{staticClass:"control-rato"},[r("div",{staticClass:"label"},[t._v("女士")]),t._v(" "),r("div",{staticClass:"rato-chart"},[r("div",{staticClass:"women",style:{width:t.sexRato.womenCnt+"%"}},[t._v("\n                    "+t._s(Math.round(t.sexRato.womenCnt))+"%\n                  ")]),t._v(" "),r("div",{staticClass:"men",style:{width:t.sexRato.menCnt+"%"}},[t._v("\n                    "+t._s(Math.round(t.sexRato.menCnt))+"%\n                  ")])]),t._v(" "),r("div",{staticClass:"label"},[t._v("男士")])]):t._e()],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("TranChart",{attrs:{id:"amountChart",options:t.chartData,styles:{height:400}}})],1)],1)],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,stripe:""}},[r("el-table-column",{attrs:{prop:"QT_Category2",label:"分类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"totalCount",label:"销售总额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.$ft(e.row.totalCount))+"\n                  ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$percent(e.row.cntRato))}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"＋／－"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$rato(e.row.crato))}})]}}])})],1),t._v(" "),t.sexRato?r("div",{staticClass:"control-rato"},[r("div",{staticClass:"label"},[t._v("女士")]),t._v(" "),r("div",{staticClass:"rato-chart"},[r("div",{staticClass:"women",style:{width:t.sexRato.womenAmount+"%"}},[t._v("\n                    "+t._s(Math.round(t.sexRato.womenAmount))+"%\n                  ")]),t._v(" "),r("div",{staticClass:"men",style:{width:t.sexRato.menAmount+"%"}},[t._v("\n                    "+t._s(Math.round(t.sexRato.menAmount))+"%\n                  ")])]),t._v(" "),r("div",{staticClass:"label"},[t._v("男士")])]):t._e()],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("TranChart",{attrs:{id:"countChart",options:t.chartDataCn,styles:{height:400}}})],1)],1)],1)],1)],1)],1),t._v(" "),r("div",{staticClass:"panel"},[t._m(1),t._v(" "),r("div",{staticClass:"panel-subtitle"},[t._v("\n      每件商品价格\n    ")]),t._v(" "),r("div",{staticClass:"panel-content"},[r("div",{staticClass:"chartitem"},[r("el-card",[r("div",{staticClass:"charts"},t._l(t.avgCharts,(function(t,e){return r("div",{key:e,staticClass:"chart-item"},[r("TranChart",{attrs:{id:"chartlist_"+e,options:t,styles:{height:300}}})],1)})),0)])],1)])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"panel-title"},[r("div",[t._v("Top 100 会员的产品喜好")]),t._v(" "),r("div",[t._v("各产品分类的占比")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"panel-title"},[t._v("\n      各品牌的消费单价\n      "),r("hr")])}],!1,null,null,null);e.default=component.exports;installComponents(component,{TranChart:r(332).default})},392:function(t,e,r){"use strict";r.r(e);r(334),r(37),r(48);var n=r(6),o=r(332),l=r(337),c=r.n(l),d={components:{TranChart:o.default},data:function(){return{categories:[],chartdata:[],cntchartdata:[],tran:[],cate:"",cate1:"",loading:!0,xCategories:[],sexRato:null,chartlist:[],countCharts:[],avgCharts:[],malls:["汇赏","汇享","汇誉"],curMall:"汇赏"}},computed:{chartData:function(){var t=this.chartdata.map((function(a){return a.y})),e=0;return t&&t.length>0&&(e=t.reduce((function(t,e){return t+e}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"销售总额:￥"+this.$ft(e)+" "+this.$rato(.05),useHTML:!0},subtitle:{text:"*按下显示分类数值"},credits:{enabled:!1},tooltip:{pointFormat:"销售额：<b>{point.y}</b>，占比<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#333"}}}},series:[{name:"占比",colorByPoint:!0,data:this.chartdata}]}},chartDataCn:function(){var t=this.cntchartdata.map((function(a){return a.y})),e=0;return t&&t.length>0&&(e=t.reduce((function(t,e){return t+e}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"销售产品数量: "+this.$ft(e)+"件 "+this.$rato(-.03),useHTML:!0},subtitle:{text:"*按下显示分类数值"},credits:{enabled:!1},tooltip:{pointFormat:"共销售<b>{point.y}</b>件，占比<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#333"}}}},series:[{name:"分类",colorByPoint:!0,data:this.cntchartdata}]}},barAmount:function(){var t=this,e=this.tran,data=[];e.length>0&&(data=this.xCategories.map((function(r){var n=e.find((function(a){return a.QT_Category2==t.cate&&a.dweek==r}));return n?n.totalPrice:0})));var r=data;return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},title:{text:this.cate+"销售额"},xAxis:{categories:this.xCategories},yAxis:{title:{text:"销售额"}},min:0,credits:{enabled:!1},legend:{enabled:!1},tooltip:{pointFormat:"销售额：<b>{point.y}</b>"},series:[{name:this.cate,data:r}]}},barCount:function(){var t=this,e=this.tran,data=[];return e.length>0&&(data=this.xCategories.map((function(r){var n=e.find((function(a){return a.QT_Category2==t.cate1&&a.dweek==r}));return n?n.totalCount:0}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},title:{text:this.cate1+"销售数量"},xAxis:{categories:this.xCategories},yAxis:{title:{text:"销售量"}},credits:{enabled:!1},legend:{enabled:!1},tooltip:{pointFormat:"共销售<b>{point.y}</b>件"},series:[{name:"分类",data:data}]}}},methods:{load:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c.a.get("/report/server/getChartList");case 4:r=e.sent,t.categoryes=r.data.model[0]||[],t.brands=r.data.model[1]||[],t.list=r.data.model[2]||[],t.autoCalc(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),t.$message({type:"error",message:"网络出错，请稍后再试"});case 15:t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},autoCalc:function(){for(var t=this,e=[],r=this.categoryes.map((function(a){return a.QT_Category2})),n=this.brands.map((function(a){return a.Brand})),o=function(o){for(var l=r[o],c=(t.categoryes[o],[]),d=[],h=[],f=function(e){var r=n[e],o=t.list.find((function(a){return a.Brand==r&&a.QT_Category2==l}));c.push(o?o.amount:0),d.push(o?o.cnt:0),h.push(o?o.avgprice:0)},m=0;m<n.length;m++)f(m);e.push({chart:{type:"bar"},xAxis:{categories:n},yAxis:{title:"售价"},title:{text:l},credits:{enabled:!1},legend:{enabled:!1},series:[{name:l,data:h}]})},l=0;l<r.length;l++)o(l);this.avgCharts=e}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.load(),e.prev=2,e.next=5,c.a.get("/report/server/getTranData");case 5:r=e.sent,t.categories=r.data.model[0]||[],t.tran=r.data.model[1]||[],t.xCategories=(r.data.model[2]||[]).map((function(a){return a.dlist})),(n=r.data.model[3]||[])&&n.length>0&&(o=n.find((function(a){return"女士"==a.ttype})),l=n.find((function(a){return"男士"==a.ttype})),o&&l&&(d=o.cnt+l.cnt,h=o.amount+l.amount,t.sexRato={womenCnt:o.cnt/d*100,menCnt:l.cnt/d*100,womenAmount:o.amount/h*100,menAmount:l.amount/h*100})),t.categories.length>0&&(t.chartdata=t.categories.map((function(a){return{name:a.QT_Category2,y:a.totalPrice}})),t.cntchartdata=t.categories.map((function(a){return{name:a.QT_Category2,y:a.totalCount}})),t.cate=t.categories[0].QT_Category2,t.cate1=t.categories[0].QT_Category2),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t.$message({type:"error",message:"网络出错，请稍后再试"});case 17:t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})))()}},h=(r(376),r(17)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart-warpper"},[r("div",{staticClass:"panel"},[r("div",{staticClass:"panel-title"},[t._v("\n        按会员层级的产品喜好\n      ")]),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-card",[r("div",{staticClass:"category-tab"},[r("ul",t._l(t.malls,(function(e){return r("li",{key:e,class:{active:t.curMall==e},on:{click:function(r){t.curMall=e}}},[t._v("\n                "+t._s(e)+"\n              ")])})),0)])])],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,stripe:""}},[r("el-table-column",{attrs:{prop:"QT_Category2",label:"分类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"totalPrice",label:"销售总额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                      "+t._s(t.$ft(e.row.totalPrice))+"\n                    ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"amountRato",label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$percent(e.row.amountRato))}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"＋／－"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$rato(e.row.arato))}})]}}])})],1),t._v(" "),t.sexRato?r("div",{staticClass:"control-rato"},[r("div",{staticClass:"label"},[t._v("女士")]),t._v(" "),r("div",{staticClass:"rato-chart"},[r("div",{staticClass:"women",style:{width:t.sexRato.womenCnt+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.womenCnt))+"%\n                    ")]),t._v(" "),r("div",{staticClass:"men",style:{width:t.sexRato.menCnt+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.menCnt))+"%\n                    ")])]),t._v(" "),r("div",{staticClass:"label"},[t._v("男士")])]):t._e()],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("TranChart",{attrs:{id:"amountChart",options:t.chartData,styles:{height:400}}})],1)],1)],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,stripe:""}},[r("el-table-column",{attrs:{prop:"QT_Category2",label:"分类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"totalCount",label:"销售总额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                      "+t._s(t.$ft(e.row.totalCount))+"\n                    ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$percent(e.row.cntRato))}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"＋／－"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$rato(e.row.crato))}})]}}])})],1),t._v(" "),t.sexRato?r("div",{staticClass:"control-rato"},[r("div",{staticClass:"label"},[t._v("女士")]),t._v(" "),r("div",{staticClass:"rato-chart"},[r("div",{staticClass:"women",style:{width:t.sexRato.womenAmount+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.womenAmount))+"%\n                    ")]),t._v(" "),r("div",{staticClass:"men",style:{width:t.sexRato.menAmount+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.menAmount))+"%\n                    ")])]),t._v(" "),r("div",{staticClass:"label"},[t._v("男士")])]):t._e()],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("TranChart",{attrs:{id:"countChart",options:t.chartDataCn,styles:{height:400}}})],1)],1)],1)],1)],1)],1),t._v(" "),r("div",{staticClass:"panel"},[t._m(0),t._v(" "),r("div",{staticClass:"panel-subtitle"},[t._v("\n        每件商品价格\n      ")]),t._v(" "),r("div",{staticClass:"panel-content"},[r("div",{staticClass:"chartitem"},[r("el-card",[r("div",{staticClass:"charts"},t._l(t.avgCharts,(function(t,e){return r("div",{key:e,staticClass:"chart-item"},[r("TranChart",{attrs:{id:"chartlist_"+e,options:t,styles:{height:300}}})],1)})),0)])],1)])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"panel-title"},[t._v("\n        各品牌的消费单价\n        "),r("hr")])}],!1,null,null,null);e.default=component.exports;installComponents(component,{TranChart:r(332).default})},393:function(t,e,r){"use strict";r.r(e);r(334),r(37),r(48);var n=r(6),o=r(332),l=r(337),c=r.n(l),d={components:{TranChart:o.default},data:function(){return{categories:[],chartdata:[],cntchartdata:[],tran:[],cate:"",cate1:"",loading:!0,xCategories:[],sexRato:null,chartlist:[],countCharts:[],avgCharts:[],ages:["<20","20-30","30-40",">40"],curAge:"<20"}},computed:{chartData:function(){var t=this.chartdata.map((function(a){return a.y})),e=0;return t&&t.length>0&&(e=t.reduce((function(t,e){return t+e}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"销售总额:￥"+this.$ft(e)+" "+this.$rato(.05),useHTML:!0},subtitle:{text:"*按下显示分类数值"},credits:{enabled:!1},tooltip:{pointFormat:"销售额：<b>{point.y}</b>，占比<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#333"}}}},series:[{name:"占比",colorByPoint:!0,data:this.chartdata}]}},chartDataCn:function(){var t=this.cntchartdata.map((function(a){return a.y})),e=0;return t&&t.length>0&&(e=t.reduce((function(t,e){return t+e}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"销售产品数量: "+this.$ft(e)+"件 "+this.$rato(-.03),useHTML:!0},subtitle:{text:"*按下显示分类数值"},credits:{enabled:!1},tooltip:{pointFormat:"共销售<b>{point.y}</b>件，占比<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#333"}}}},series:[{name:"分类",colorByPoint:!0,data:this.cntchartdata}]}},barAmount:function(){var t=this,e=this.tran,data=[];e.length>0&&(data=this.xCategories.map((function(r){var n=e.find((function(a){return a.QT_Category2==t.cate&&a.dweek==r}));return n?n.totalPrice:0})));var r=data;return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},title:{text:this.cate+"销售额"},xAxis:{categories:this.xCategories},yAxis:{title:{text:"销售额"}},min:0,credits:{enabled:!1},legend:{enabled:!1},tooltip:{pointFormat:"销售额：<b>{point.y}</b>"},series:[{name:this.cate,data:r}]}},barCount:function(){var t=this,e=this.tran,data=[];return e.length>0&&(data=this.xCategories.map((function(r){var n=e.find((function(a){return a.QT_Category2==t.cate1&&a.dweek==r}));return n?n.totalCount:0}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},title:{text:this.cate1+"销售数量"},xAxis:{categories:this.xCategories},yAxis:{title:{text:"销售量"}},credits:{enabled:!1},legend:{enabled:!1},tooltip:{pointFormat:"共销售<b>{point.y}</b>件"},series:[{name:"分类",data:data}]}}},methods:{load:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c.a.get("/report/server/getChartList");case 4:r=e.sent,t.categoryes=r.data.model[0]||[],t.brands=r.data.model[1]||[],t.list=r.data.model[2]||[],t.autoCalc(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),t.$message({type:"error",message:"网络出错，请稍后再试"});case 15:t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},autoCalc:function(){for(var t=this,e=[],r=this.categoryes.map((function(a){return a.QT_Category2})),n=this.brands.map((function(a){return a.Brand})),o=function(o){for(var l=r[o],c=(t.categoryes[o],[]),d=[],h=[],f=function(e){var r=n[e],o=t.list.find((function(a){return a.Brand==r&&a.QT_Category2==l}));c.push(o?o.amount:0),d.push(o?o.cnt:0),h.push(o?o.avgprice:0)},m=0;m<n.length;m++)f(m);e.push({chart:{type:"bar"},xAxis:{categories:n},yAxis:{title:"售价"},title:{text:l},credits:{enabled:!1},legend:{enabled:!1},series:[{name:l,data:h}]})},l=0;l<r.length;l++)o(l);this.avgCharts=e}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.load(),e.prev=2,e.next=5,c.a.get("/report/server/getTranData");case 5:r=e.sent,t.categories=r.data.model[0]||[],t.tran=r.data.model[1]||[],t.xCategories=(r.data.model[2]||[]).map((function(a){return a.dlist})),(n=r.data.model[3]||[])&&n.length>0&&(o=n.find((function(a){return"女士"==a.ttype})),l=n.find((function(a){return"男士"==a.ttype})),o&&l&&(d=o.cnt+l.cnt,h=o.amount+l.amount,t.sexRato={womenCnt:o.cnt/d*100,menCnt:l.cnt/d*100,womenAmount:o.amount/h*100,menAmount:l.amount/h*100})),t.categories.length>0&&(t.chartdata=t.categories.map((function(a){return{name:a.QT_Category2,y:a.totalPrice}})),t.cntchartdata=t.categories.map((function(a){return{name:a.QT_Category2,y:a.totalCount}})),t.cate=t.categories[0].QT_Category2,t.cate1=t.categories[0].QT_Category2),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t.$message({type:"error",message:"网络出错，请稍后再试"});case 17:t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})))()}},h=(r(378),r(17)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart-warpper"},[r("div",{staticClass:"panel"},[r("div",{staticClass:"panel-title"},[t._v("\n        按年龄组別不同的产品喜好\n      ")]),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-card",[r("div",{staticClass:"category-tab"},[r("ul",t._l(t.ages,(function(e){return r("li",{key:e,class:{active:t.curAge==e},on:{click:function(r){t.curAge=e}}},[t._v("\n                "+t._s(e)+"\n              ")])})),0)])])],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,stripe:""}},[r("el-table-column",{attrs:{prop:"QT_Category2",label:"分类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"totalPrice",label:"销售总额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                      "+t._s(t.$ft(e.row.totalPrice))+"\n                    ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"amountRato",label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$percent(e.row.amountRato))}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"＋／－"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$rato(e.row.arato))}})]}}])})],1),t._v(" "),t.sexRato?r("div",{staticClass:"control-rato"},[r("div",{staticClass:"label"},[t._v("女士")]),t._v(" "),r("div",{staticClass:"rato-chart"},[r("div",{staticClass:"women",style:{width:t.sexRato.womenCnt+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.womenCnt))+"%\n                    ")]),t._v(" "),r("div",{staticClass:"men",style:{width:t.sexRato.menCnt+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.menCnt))+"%\n                    ")])]),t._v(" "),r("div",{staticClass:"label"},[t._v("男士")])]):t._e()],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("TranChart",{attrs:{id:"amountChart",options:t.chartData,styles:{height:400}}})],1)],1)],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,stripe:""}},[r("el-table-column",{attrs:{prop:"QT_Category2",label:"分类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"totalCount",label:"销售总额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                      "+t._s(t.$ft(e.row.totalCount))+"\n                    ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$percent(e.row.cntRato))}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"＋／－"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$rato(e.row.crato))}})]}}])})],1),t._v(" "),t.sexRato?r("div",{staticClass:"control-rato"},[r("div",{staticClass:"label"},[t._v("女士")]),t._v(" "),r("div",{staticClass:"rato-chart"},[r("div",{staticClass:"women",style:{width:t.sexRato.womenAmount+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.womenAmount))+"%\n                    ")]),t._v(" "),r("div",{staticClass:"men",style:{width:t.sexRato.menAmount+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.menAmount))+"%\n                    ")])]),t._v(" "),r("div",{staticClass:"label"},[t._v("男士")])]):t._e()],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("TranChart",{attrs:{id:"countChart",options:t.chartDataCn,styles:{height:400}}})],1)],1)],1)],1)],1)],1),t._v(" "),r("div",{staticClass:"panel"},[t._m(0),t._v(" "),r("div",{staticClass:"panel-subtitle"},[t._v("\n        每件商品价格\n      ")]),t._v(" "),r("div",{staticClass:"panel-content"},[r("div",{staticClass:"chartitem"},[r("el-card",[r("div",{staticClass:"charts"},t._l(t.avgCharts,(function(t,e){return r("div",{key:e,staticClass:"chart-item"},[r("TranChart",{attrs:{id:"chartlist_"+e,options:t,styles:{height:300}}})],1)})),0)])],1)])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"panel-title"},[t._v("\n        各品牌的消费单价\n        "),r("hr")])}],!1,null,null,null);e.default=component.exports;installComponents(component,{TranChart:r(332).default})},407:function(t,e,r){var content=r(434);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(47).default)("4d34a688",content,!0,{sourceMap:!1})},411:function(t,e,r){"use strict";r.r(e);r(334),r(37),r(48);var n=r(6),o=r(332),l=r(337),c=r.n(l),d={components:{TranChart:o.default},data:function(){return{categories:[],chartdata:[],cntchartdata:[],tran:[],cate:"",cate1:"",loading:!0,xCategories:[],sexRato:null,chartlist:[],countCharts:[],avgCharts:[],genders:["男","女"],curGender:"男"}},computed:{chartData:function(){var t=this.chartdata.map((function(a){return a.y})),e=0;return t&&t.length>0&&(e=t.reduce((function(t,e){return t+e}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"销售总额:￥"+this.$ft(e)+" "+this.$rato(.05),useHTML:!0},subtitle:{text:"*按下显示分类数值"},credits:{enabled:!1},tooltip:{pointFormat:"销售额：<b>{point.y}</b>，占比<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#333"}}}},series:[{name:"占比",colorByPoint:!0,data:this.chartdata}]}},chartDataCn:function(){var t=this.cntchartdata.map((function(a){return a.y})),e=0;return t&&t.length>0&&(e=t.reduce((function(t,e){return t+e}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"销售产品数量: "+this.$ft(e)+"件 "+this.$rato(-.03),useHTML:!0},subtitle:{text:"*按下显示分类数值"},credits:{enabled:!1},tooltip:{pointFormat:"共销售<b>{point.y}</b>件，占比<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#333"}}}},series:[{name:"分类",colorByPoint:!0,data:this.cntchartdata}]}},barAmount:function(){var t=this,e=this.tran,data=[];e.length>0&&(data=this.xCategories.map((function(r){var n=e.find((function(a){return a.QT_Category2==t.cate&&a.dweek==r}));return n?n.totalPrice:0})));var r=data;return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},title:{text:this.cate+"销售额"},xAxis:{categories:this.xCategories},yAxis:{title:{text:"销售额"}},min:0,credits:{enabled:!1},legend:{enabled:!1},tooltip:{pointFormat:"销售额：<b>{point.y}</b>"},series:[{name:this.cate,data:r}]}},barCount:function(){var t=this,e=this.tran,data=[];return e.length>0&&(data=this.xCategories.map((function(r){var n=e.find((function(a){return a.QT_Category2==t.cate1&&a.dweek==r}));return n?n.totalCount:0}))),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},title:{text:this.cate1+"销售数量"},xAxis:{categories:this.xCategories},yAxis:{title:{text:"销售量"}},credits:{enabled:!1},legend:{enabled:!1},tooltip:{pointFormat:"共销售<b>{point.y}</b>件"},series:[{name:"分类",data:data}]}}},methods:{load:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c.a.get("/report/server/getChartList");case 4:r=e.sent,t.categoryes=r.data.model[0]||[],t.brands=r.data.model[1]||[],t.list=r.data.model[2]||[],t.autoCalc(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),t.$message({type:"error",message:"网络出错，请稍后再试"});case 15:t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},autoCalc:function(){for(var t=this,e=[],r=this.categoryes.map((function(a){return a.QT_Category2})),n=this.brands.map((function(a){return a.Brand})),o=function(o){for(var l=r[o],c=(t.categoryes[o],[]),d=[],h=[],f=function(e){var r=n[e],o=t.list.find((function(a){return a.Brand==r&&a.QT_Category2==l}));c.push(o?o.amount:0),d.push(o?o.cnt:0),h.push(o?o.avgprice:0)},m=0;m<n.length;m++)f(m);e.push({chart:{type:"bar"},xAxis:{categories:n},yAxis:{title:"售价"},title:{text:l},credits:{enabled:!1},legend:{enabled:!1},series:[{name:l,data:h}]})},l=0;l<r.length;l++)o(l);this.avgCharts=e}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.load(),e.prev=2,e.next=5,c.a.get("/report/server/getTranData");case 5:r=e.sent,t.categories=r.data.model[0]||[],t.tran=r.data.model[1]||[],t.xCategories=(r.data.model[2]||[]).map((function(a){return a.dlist})),(n=r.data.model[3]||[])&&n.length>0&&(o=n.find((function(a){return"女士"==a.ttype})),l=n.find((function(a){return"男士"==a.ttype})),o&&l&&(d=o.cnt+l.cnt,h=o.amount+l.amount,t.sexRato={womenCnt:o.cnt/d*100,menCnt:l.cnt/d*100,womenAmount:o.amount/h*100,menAmount:l.amount/h*100})),t.categories.length>0&&(t.chartdata=t.categories.map((function(a){return{name:a.QT_Category2,y:a.totalPrice}})),t.cntchartdata=t.categories.map((function(a){return{name:a.QT_Category2,y:a.totalCount}})),t.cate=t.categories[0].QT_Category2,t.cate1=t.categories[0].QT_Category2),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t.$message({type:"error",message:"网络出错，请稍后再试"});case 17:t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})))()}},h=(r(380),r(17)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart-warpper"},[r("div",{staticClass:"panel"},[r("div",{staticClass:"panel-title"},[t._v("\n        按会员层级的产品喜好\n      ")]),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-card",[r("div",{staticClass:"category-tab"},[r("ul",t._l(t.genders,(function(e){return r("li",{key:e,class:{active:t.curGender==e},on:{click:function(r){t.curGender=e}}},[t._v("\n                "+t._s(e)+"\n              ")])})),0)])])],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,stripe:""}},[r("el-table-column",{attrs:{prop:"QT_Category2",label:"分类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"totalPrice",label:"销售总额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                      "+t._s(t.$ft(e.row.totalPrice))+"\n                    ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"amountRato",label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$percent(e.row.amountRato))}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"＋／－"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$rato(e.row.arato))}})]}}])})],1),t._v(" "),t.sexRato?r("div",{staticClass:"control-rato"},[r("div",{staticClass:"label"},[t._v("女士")]),t._v(" "),r("div",{staticClass:"rato-chart"},[r("div",{staticClass:"women",style:{width:t.sexRato.womenCnt+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.womenCnt))+"%\n                    ")]),t._v(" "),r("div",{staticClass:"men",style:{width:t.sexRato.menCnt+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.menCnt))+"%\n                    ")])]),t._v(" "),r("div",{staticClass:"label"},[t._v("男士")])]):t._e()],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("TranChart",{attrs:{id:"amountChart",options:t.chartData,styles:{height:400}}})],1)],1)],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,stripe:""}},[r("el-table-column",{attrs:{prop:"QT_Category2",label:"分类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"totalCount",label:"销售总额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                      "+t._s(t.$ft(e.row.totalCount))+"\n                    ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$percent(e.row.cntRato))}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"cntRato",label:"＋／－"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{domProps:{innerHTML:t._s(t.$rato(e.row.crato))}})]}}])})],1),t._v(" "),t.sexRato?r("div",{staticClass:"control-rato"},[r("div",{staticClass:"label"},[t._v("女士")]),t._v(" "),r("div",{staticClass:"rato-chart"},[r("div",{staticClass:"women",style:{width:t.sexRato.womenAmount+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.womenAmount))+"%\n                    ")]),t._v(" "),r("div",{staticClass:"men",style:{width:t.sexRato.menAmount+"%"}},[t._v("\n                      "+t._s(Math.round(t.sexRato.menAmount))+"%\n                    ")])]),t._v(" "),r("div",{staticClass:"label"},[t._v("男士")])]):t._e()],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("TranChart",{attrs:{id:"countChart",options:t.chartDataCn,styles:{height:400}}})],1)],1)],1)],1)],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{TranChart:r(332).default})},433:function(t,e,r){"use strict";r(407)},434:function(t,e,r){var n=r(46)(!1);n.push([t.i,".container{padding:0 15px}",""]),t.exports=n},445:function(t,e,r){"use strict";r.r(e);r(347),r(367),r(391),r(392),r(393);var n={components:{},created:function(){},asyncData:function(t){t.req;return{isLogin:!0}}},o=(r(433),r(17)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("MemberPieChartTop"),t._v(" "),r("MemberPreference"),t._v(" "),r("MemberAgePreference"),t._v(" "),r("MemberGenderPreference")],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{MemberPieChartTop:r(391).default,MemberPreference:r(392).default,MemberAgePreference:r(393).default,MemberGenderPreference:r(411).default})}}]);