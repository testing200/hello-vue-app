(window.webpackJsonp=window.webpackJsonp||[]).push([[7,22],{332:function(t,e,n){"use strict";n.r(e);var r=n(341),c=n.n(r),l={props:["id","options","styles"],name:"highcharts",data:function(){return{chart:null}},mounted:function(){this.initChart()},watch:{options:function(){this.chart&&this.chart.update(this.options)}},methods:{initChart:function(){this.$el.style.height=(this.styles.height||400)+"px",this.chart=new c.a.Chart(this.$el,this.options)}}},o=(n(335),n(17)),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"highcharts-container",attrs:{id:t.id}})}),[],!1,null,null,null);e.default=component.exports},333:function(t,e,n){var content=n(336);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(47).default)("16b76a31",content,!0,{sourceMap:!1})},334:function(t,e,n){"use strict";var r=n(4),c=n(87).find,l=n(146),o="find",h=!0;o in[]&&Array(1).find((function(){h=!1})),r({target:"Array",proto:!0,forced:h},{find:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}}),l(o)},335:function(t,e,n){"use strict";n(333)},336:function(t,e,n){var r=n(46)(!1);r.push([t.i,".highcharts-container{width:100%;height:500px}",""]),t.exports=r},352:function(t,e,n){var content=n(373);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(47).default)("6205315e",content,!0,{sourceMap:!1})},372:function(t,e,n){"use strict";n(352)},373:function(t,e,n){var r=n(46)(!1);r.push([t.i,".charts{display:flex;width:100%}.charts .chart-item{padding:10px;flex:1}",""]),t.exports=r},390:function(t,e,n){"use strict";n.r(e);n(334),n(37),n(48);var r=n(6),c=n(332),l=n(337),o=n.n(l),h={components:{TranChart:c.default},data:function(){return{loading:!0,brands:[],categoryes:[],list:[],chartlist:[],countCharts:[],avgCharts:[]}},methods:{load:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o.a.get("/report/server/getChartList");case 4:n=e.sent,t.categoryes=n.data.model[0]||[],t.brands=n.data.model[1]||[],t.list=n.data.model[2]||[],t.autoCalc(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),t.$message({type:"error",message:"网络出错，请稍后再试"});case 15:t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},autoCalc:function(){for(var t=this,e=[],n=[],r=[],c=this.categoryes.map((function(a){return a.QT_Category2})),l=this.brands.map((function(a){return a.Brand})),o=function(o){for(var h=c[o],d=t.categoryes[o],f=[],v=[],C=[],m=function(e){var n=l[e],r=t.list.find((function(a){return a.Brand==n&&a.QT_Category2==h}));f.push(r?r.amount:0),v.push(r?r.cnt:0),C.push(r?r.avgprice:0)},y=0;y<l.length;y++)m(y);e.push({chart:{type:"bar"},xAxis:{categories:l},yAxis:{title:"销售额"},plotOptions:{bar:{dataLabels:{formatter:function(){return Math.round(this.y/d.amount*100)+"%"},enabled:!0,allowOverlap:!0}}},title:{text:h},credits:{enabled:!1},legend:{enabled:!1},series:[{name:h,data:f}]}),n.push({chart:{type:"bar"},xAxis:{categories:l},yAxis:{title:"销售量"},plotOptions:{bar:{dataLabels:{formatter:function(){return Math.round(this.y/d.cnt*100)+"%"},enabled:!0,allowOverlap:!0}}},title:{text:h},credits:{enabled:!1},legend:{enabled:!1},series:[{name:h,data:v}]}),r.push({chart:{type:"bar"},xAxis:{categories:l},yAxis:{title:"售价"},title:{text:h},credits:{enabled:!1},legend:{enabled:!1},series:[{name:h,data:C}]})},h=0;h<c.length;h++)o(h);this.chartlist=e,this.countCharts=n,this.avgCharts=r}},created:function(){this.load()}},d=(n(372),n(17)),component=Object(d.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel-title"},[t._v("\n      销售金额\n    ")]),t._v(" "),n("div",{staticClass:"panel-content"},[n("div",{staticClass:"chartitem"},[n("el-card",[n("div",{staticClass:"charts"},t._l(t.chartlist,(function(t,e){return n("div",{key:e,staticClass:"chart-item"},[n("TranChart",{attrs:{id:"chartlist_"+e,options:t,styles:{height:300}}})],1)})),0)])],1)])]),t._v(" "),n("div",{staticClass:"panel"},[n("div",{staticClass:"panel-title"},[t._v("\n      销售数量\n    ")]),t._v(" "),n("div",{staticClass:"panel-content"},[n("div",{staticClass:"chartitem"},[n("el-card",[n("div",{staticClass:"charts"},t._l(t.countCharts,(function(t,e){return n("div",{key:e,staticClass:"chart-item"},[n("TranChart",{attrs:{id:"chartlist_"+e,options:t,styles:{height:300}}})],1)})),0)])],1)])]),t._v(" "),n("div",{staticClass:"panel"},[n("div",{staticClass:"panel-title"},[t._v("\n      每件商品售价\n    ")]),t._v(" "),n("div",{staticClass:"panel-content"},[n("div",{staticClass:"chartitem"},[n("el-card",[n("div",{staticClass:"charts"},t._l(t.avgCharts,(function(t,e){return n("div",{key:e,staticClass:"chart-item"},[n("TranChart",{attrs:{id:"chartlist_"+e,options:t,styles:{height:300}}})],1)})),0)])],1)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{TranChart:n(332).default})}}]);